const t=window.airship.h;class e{constructor(){this.options=[],this.selectedOption=null,this.defaultText="",this.showClearButton=!1,this.isOpen=!1,this.selectedOptionObject={},this.onClickOutside=(()=>{this._closeList()})}async closeList(){this._closeList()}onSelectionChanged(t){this._selectFromValue(t)}onOptionsChanged(){this._selectFromValue(this.selectedOption)}onClickOutsideChanged(t,e){document.removeEventListener("click",e),document.addEventListener("click",t)}componentWillLoad(){this._selectFromValue(this.selectedOption)}componentDidLoad(){document.addEventListener("click",this.onClickOutside)}componentDidUnload(){document.removeEventListener("click",this.onClickOutside)}render(){const e=this.showClearButton&&Boolean(this.selectedOption);return t("div",{class:{"as-dropdown":!0,"as-dropdown--clear":e,"as-dropdown--open":this.isOpen}},t("button",{class:"as-dropdown__control as-body","aria-haspopup":"true","aria-expanded":this.isOpen,onClick:t=>{t.stopPropagation(),this._toggleList()}},this.selectedOptionObject&&this.selectedOptionObject.text||this.selectedOptionObject&&this.selectedOptionObject.value||this.defaultText,t("div",{class:"as-dropdown__arrow"},t("svg",{viewBox:"2 6 12 6",xmlns:"http://www.w3.org/2000/svg"},t("path",{d:"M8.30988427,11.1237193 L7.69011573,11.1237193 L15.2195214,4.12372525 C15.415115,3.94188438 15.7124148,3.96294311 15.8835591,4.17076125 C16.0547035,4.37857939 16.0348835,4.69446043 15.83929,4.8763013 L8.30988427,11.8762953 C8.13246042,12.041244 7.86753958,12.041244 7.69011573,11.8762953 L0.160710032,4.8763013 C-0.034883519,4.69446043 -0.0547035068,4.37857939 0.116440851,4.17076125 C0.287585208,3.96294311 0.584885024,3.94188438 0.780478575,4.12372525 L8.30988427,11.1237193 Z"})))),t("ul",{tabindex:"-1",class:"as-dropdown__list"},this._renderOptions(this.options)),e?t("button",{class:"as-dropdown__clear",onClick:()=>this.clearOption()},t("svg",{viewBox:"2 2 12 12",xmlns:"http://www.w3.org/2000/svg"},t("path",{d:"M8,8.58232323 L1.70292632,14.8793969 C1.5421222,15.040201 1.28140721,15.040201 1.12060309,14.8793969 C0.95979897,14.7185928 0.95979897,14.4578778 1.12060309,14.2970737 L7.41767677,8 L1.12060309,1.70292632 C0.95979897,1.5421222 0.95979897,1.28140721 1.12060309,1.12060309 C1.28140721,0.95979897 1.5421222,0.95979897 1.70292632,1.12060309 L8,7.41767677 L14.2970737,1.12060309 C14.4578778,0.95979897 14.7185928,0.95979897 14.8793969,1.12060309 C15.040201,1.28140721 15.040201,1.5421222 14.8793969,1.70292632 L8.58232323,8 L14.8793969,14.2970737 C15.040201,14.4578778 15.040201,14.7185928 14.8793969,14.8793969 C14.7185928,15.040201 14.4578778,15.040201 14.2970737,14.8793969 L8,8.58232323 Z"}))):"")}_renderOptions(e){return e.map(e=>{const s={"as-body":!0,"is-selected":this._isSelected(e)};return t("li",{class:"as-dropdown__list-item","data-value":e.value},t("button",{class:s,onClick:t=>{t.stopPropagation(),this._select(e)}},e.text||e.value))})}_isSelected(t){return t===this.selectedOptionObject}_select(t){this.selectedOption!==t.value&&(this.selectedOption=t.value,this.selectedOptionObject=t,this._closeList(),this._emitOption())}_selectFromValue(t){if(null==t)return void(this.selectedOptionObject=null);const e=this.options.find(e=>e.value===t);e&&(this.selectedOptionObject=e)}_toggleList(){this.isOpen=!this.isOpen}_closeList(){this.isOpen=!1}clearOption(){this._closeList(),this.selectedOption=null,this._emitOption()}_emitOption(){this.optionChanged&&this.optionChanged.emit(this.selectedOption)}static get is(){return"as-dropdown"}static get properties(){return{closeList:{method:!0},defaultText:{type:String,attr:"default-text"},isOpen:{state:!0},onClickOutside:{type:"Any",attr:"on-click-outside",watchCallbacks:["onClickOutsideChanged"]},options:{type:"Any",attr:"options",watchCallbacks:["onOptionsChanged"]},selectedOption:{type:String,attr:"selected-option",mutable:!0,watchCallbacks:["onSelectionChanged"]},selectedOptionObject:{state:!0},showClearButton:{type:Boolean,attr:"show-clear-button"}}}static get events(){return[{name:"optionChanged",method:"optionChanged",bubbles:!0,cancelable:!0,composed:!0}]}static get style(){return".as-menu-dropdown{--as-menu-dropdown--color--hover:rgba(71,219,153,0.16);position:relative}.as-menu-dropdown--input{width:100%;min-height:32px;margin:0;padding:0 12px;border:0;background:var(--as--color--ui-01);color:var(--as--color--primary);font:var(--as--font--body);text-align:left;cursor:pointer}.as-menu-dropdown--input:focus,.as-menu-dropdown--input:hover{background:var(--as-menu-dropdown--color--hover)}.as-menu-dropdown--options{position:absolute;z-index:3;width:100%;height:0;margin:0 auto;padding:0;overflow:hidden;border-radius:4px;background:#fff;-webkit-box-shadow:0 2px 8px 0 rgba(44,44,44,.16);box-shadow:0 2px 8px 0 rgba(44,44,44,.16)}.as-menu-dropdown--options li{display:-ms-flexbox;display:flex;-ms-flex-align:start;align-items:flex-start;width:100%;padding:0 12px;-webkit-transition:background-color .3s;transition:background-color .3s;border:0;border-bottom:1px solid var(--as--color--ui-04);outline:none;background:var(--as--color--ui-01);color:var(--as--color--type-01);font:var(--as--font--body);list-style:none;cursor:pointer}.as-menu-dropdown--options li:first-child{border-top:1px solid #f0f0f0;border-radius:4px 4px 0 0}.as-menu-dropdown--options li:last-child{border-radius:0 0 4px 4px}.as-menu-dropdown--options li:focus-within,.as-menu-dropdown--options li:hover{background:var(--as-menu-dropdown--color-hover)}.as-menu-dropdown--options li button{width:100%;height:100%;min-height:32px;padding:0;border:none;outline:none;background:none;text-align:left;cursor:pointer}.as-menu-dropdown--options:focus,.as-menu-dropdown--options:hover{height:auto}.as-menu-dropdown--options:focus-within{height:auto}.as-menu-dropdown--input:focus+.as-menu-dropdown--options,.as-menu-dropdown--input:hover+.as-menu-dropdown--options{height:auto}as-dropdown{display:block;--as-dropdown--color--main:#1785fb;--as-dropdown--color--secondary:#d1d5d7}as-dropdown .as-dropdown{position:relative}as-dropdown .as-dropdown__control{position:relative;width:100%;min-height:16px;margin:0;padding:8px 32px 8px 8px;overflow:hidden;border:0;border-radius:4px;background-color:var(--as--color-ui--01);-webkit-box-shadow:inset 0 0 0 1px var(--as-dropdown--color--secondary,#d1d5d7);box-shadow:inset 0 0 0 1px var(--as-dropdown--color--secondary,#d1d5d7);text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:pointer}as-dropdown .as-dropdown__arrow{position:absolute;top:50%;right:12px;width:12px;-webkit-transform:translate3d(0,-50%,0);transform:translate3d(0,-50%,0);background-repeat:no-repeat}as-dropdown .as-dropdown__arrow path{fill:var(--as-dropdown--color--main,#1785fb)}as-dropdown .as-dropdown__list{display:none;position:absolute;z-index:1;width:100%;margin:8px 0 0;padding:0;overflow:hidden;border:1px solid var(--as--color--ui-03,#e2e6e3);border-radius:4px;background:#fff;-webkit-box-shadow:0 2px 8px 0 rgba(44,44,44,.16);box-shadow:0 2px 8px 0 rgba(44,44,44,.16)}as-dropdown .as-dropdown__list-item{border:0;outline:none;cursor:pointer}as-dropdown .as-dropdown__list-item:not(:last-child){border-bottom:1px solid var(--as--color--ui-03,#e2e6e3)}as-dropdown .as-dropdown__list-item button{width:100%;height:100%;margin:0;padding:8px 12px;border:0;outline:none;background-color:#fff;text-align:left;cursor:inherit}as-dropdown .as-dropdown__list-item button.is-selected,as-dropdown .as-dropdown__list-item button:hover{background-color:rgba(71,219,153,.16)}as-dropdown .as-dropdown--open .as-dropdown__control{-webkit-box-shadow:inset 0 0 0 2px var(--as-dropdown--color--main,#1785fb);box-shadow:inset 0 0 0 2px var(--as-dropdown--color--main,#1785fb)}as-dropdown .as-dropdown--open .as-dropdown__list{display:block}as-dropdown .as-dropdown--clear{width:calc(100% - 36px)}as-dropdown .as-dropdown__clear{position:absolute;top:50%;right:-24px;width:12px;height:12px;margin:0;padding:0;-webkit-transform:translate3d(0,-50%,0);transform:translate3d(0,-50%,0);border:0;background-color:#fff;cursor:pointer}as-dropdown .as-dropdown__clear path{fill:var(--as-dropdown--color--main,#1785fb)}"}}export{e as AsDropdown};